import { Meta, Canvas, Story, Props } from "@storybook/addon-docs/blocks";
import { BADGE } from "@geometricpanda/storybook-addon-badges";
import { SearchInput } from "./SearchInput";

<Meta title="Forms/Search Input" parameters={{ badges: [BADGE.OBSOLETE] }} />

export const searchInput = (args) => <SearchInput {...args} />;

# Search Input

Search offers users a way to explore a website or application using keywords. Search can be used as the primary means of discovering content or as a filter to aid the user in finding content.

The Search Input is made up of the following:

- Search Icon: Signifies a search field. The magnifying glass icon is a universal way to indicate search.
- Placeholder text: Useful and short text hinting at what the user can search for. For example, “Search for networks or devices.”
- Alert Icon (optional): Signifies that an error is present. 
- Clear Button: Only appears when a text input has been given by the user. Clears the current text that is typed.
- Helper Text (optional): The error message can be used to help the user fix their input quickly and should be specific to the detected error.
- Text entry field: The place where a user enters their search query.

To show/hide the Clear Button, the class `made-c-search-input__close-button-show` can be added or removed from the button.

## Default

<Canvas>
  <Story
    name="Default"
    argTypes={{
      placeholder: {
        name: "Placeholder",
      },
      state: {
        name: "State",
        control: {
          type: "radio",
          options: ["default", "disabled", "error"],
        },
      },
      validationText: {
        name: "Validation Text",
      },
      rounded : {
        name: "Rounded Corners"
      }
    }}
    args={{
      name: "default",
      value: "",
      placeholder: "Type to search...",
      state: "default",
      validationText: "Validation",
      rounded: false,
    }}
    parameters={{
      controls: {
        exclude: ["name", "value"],
      },
      docs: {
        source: {
          code: `
<div class="made-c-form__element">
  <svg class="made-c-search-input__search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 3.125C5.6434 3.125 3.125 5.6434 3.125 8.75C3.125 11.8566 5.6434 14.375 8.75 14.375C10.3035 14.375 11.7089 13.7461 12.7275 12.7275C13.7461 11.7089 14.375 10.3035 14.375 8.75C14.375 5.6434 11.8566 3.125 8.75 3.125ZM1.875 8.75C1.875 4.95304 4.95304 1.875 8.75 1.875C12.547 1.875 15.625 4.95304 15.625 8.75C15.625 10.4232 15.0266 11.9575 14.0333 13.1494L17.9419 17.0581C18.186 17.3021 18.186 17.6979 17.9419 17.9419C17.6979 18.186 17.3021 18.186 17.0581 17.9419L13.1494 14.0333C11.9575 15.0266 10.4232 15.625 8.75 15.625C4.95304 15.625 1.875 12.547 1.875 8.75Z" fill="currentColor" />
        </svg>
    <input
      type="text"
      id="default"
      name="default"
      class="made-c-search-input made-u-margin-bottom-2-x"
      placeholder="Placeholder text"
    />
    <button type="button" class="made-c-search-input__close-button">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.55806 4.55806C4.80214 4.31398 5.19786 4.31398 5.44194 4.55806L10 9.11612L14.5581 4.55806C14.8021 4.31398 15.1979 4.31398 15.4419 4.55806C15.686 4.80214 15.686 5.19786 15.4419 5.44194L10.8839 10L15.4419 14.5581C15.686 14.8021 15.686 15.1979 15.4419 15.4419C15.1979 15.686 14.8021 15.686 14.5581 15.4419L10 10.8839L5.44194 15.4419C5.19786 15.686 4.80214 15.686 4.55806 15.4419C4.31398 15.1979 4.31398 14.8021 4.55806 14.5581L9.11612 10L4.55806 5.44194C4.31398 5.19786 4.31398 4.80214 4.55806 4.55806Z" fill="currentColor" />
          </svg>
    </button>
  </div>
</div>
`,
        },
      },
    }}
  >
    >{searchInput.bind({})}
  </Story>
</Canvas>

## Disabled

Add the disabled boolean attribute on the input and the clear button to give it a grayed-out appearance and remove pointer events.

<Canvas>
  <Story
    name="Disabled State"
    argTypes={{
      placeholder: {
        name: "Placeholder",
      },
      state: {
        name: "State",
        control: {
          type: "radio",
          options: ["default", "disabled", "error"],
        },
      },
      validationText: {
        name: "Validation Text",
      },
      rounded : {
        name: "Rounded Corners"
      }
    }}
    args={{
      name: "disabled-state",
      value: "",
      placeholder: "Type to search...",
      state: "disabled",
      validationText: "Validation",
      rounded: false,
    }}
    parameters={{
      controls: {
        exclude: ["name", "value"],
      },
      docs: {
        source: {
          code: `
<div class="made-c-form__element">
  <div class="made-c-search-input__wrapper">
    <input
      type="text"
      id="default"
      name="default"
      class="made-c-search-input made-u-margin-bottom-2-x"
      placeholder="Type to search..."
      disabled
    />
      <svg class="made-c-search-input__search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" fill="currentColor" />
        </svg>
    <button type="button" class="made-c-search-input__close-button" disabled>
   <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.55806 4.55806C4.80214 4.31398 5.19786 4.31398 5.44194 4.55806L10 9.11612L14.5581 4.55806C14.8021 4.31398 15.1979 4.31398 15.4419 4.55806C15.686 4.80214 15.686 5.19786 15.4419 5.44194L10.8839 10L15.4419 14.5581C15.686 14.8021 15.686 15.1979 15.4419 15.4419C15.1979 15.686 14.8021 15.686 14.5581 15.4419L10 10.8839L5.44194 15.4419C5.19786 15.686 4.80214 15.686 4.55806 15.4419C4.31398 15.1979 4.31398 14.8021 4.55806 14.5581L9.11612 10L4.55806 5.44194C4.31398 5.19786 4.31398 4.80214 4.55806 4.55806Z" fill="currentColor" />
          </svg>
    </button>
  </div>
</div>
`,
        },
      },
    }}
  >
    >{searchInput.bind({})}
  </Story>
</Canvas>

## Error State

The error message is used to help the user fix their input quickly and should be specific to the detected error.

<Canvas>
  <Story
    name="Error State"
    argTypes={{
      placeholder: {
        name: "Placeholder",
      },
      state: {
        name: "State",
        control: {
          type: "radio",
          options: ["default", "disabled", "error"],
        },
      },
      validationText: {
        name: "Validation Text",
      },
      rounded : {
        name: "Rounded Corners"
      }
    }}
    args={{
      name: "error-state",
      value: "",
      placeholder: "Type to search...",
      state: "error",
      validationText: "Validation",
      rounded: false,
    }}
    parameters={{
      controls: {
        exclude: ["name", "value"],
      },
      docs: {
        source: {
          code: `
<div class="made-c-form__element">
  <div class="made-c-search-input__wrapper">
       <svg class="made-c-search-input__search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" fill="currentColor" />
        </svg>
    <input
      type="text"
      id="default"
      name="default"
      class="made-c-search-input made-u-margin-bottom-2-x made-c-search-input--error"
      placeholder="Placeholder text"
    />
    <button type="button" class="made-c-search-input__close-button">
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.55806 4.55806C4.80214 4.31398 5.19786 4.31398 5.44194 4.55806L10 9.11612L14.5581 4.55806C14.8021 4.31398 15.1979 4.31398 15.4419 4.55806C15.686 4.80214 15.686 5.19786 15.4419 5.44194L10.8839 10L15.4419 14.5581C15.686 14.8021 15.686 15.1979 15.4419 15.4419C15.1979 15.686 14.8021 15.686 14.5581 15.4419L10 10.8839L5.44194 15.4419C5.19786 15.686 4.80214 15.686 4.55806 15.4419C4.31398 15.1979 4.31398 14.8021 4.55806 14.5581L9.11612 10L4.55806 5.44194C4.31398 5.19786 4.31398 4.80214 4.55806 4.55806Z" fill="currentColor" />
          </svg>
    </button>
  </div>
  <div
    class="made-c-form__validation--error made-c-form__validation--search-input"
  >
     <svg class="made-u-margin-right-1-x made-u-flex-shrink-0" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.495 1.87c.669-1.16 2.341-1.16 3.01 0l4.26 7.383c.668 1.159-.168 2.606-1.505 2.606H1.74c-1.337 0-2.173-1.447-1.505-2.606l4.26-7.384zm2.13 3.04a.543.543 0 10-1.086 0v2.484a.543.543 0 101.087 0V4.91zm-.542 3.927c-.3 0-.544.244-.544.544v.005c0 .3.244.543.544.543h.004c.3 0 .543-.244.543-.543V9.38c0-.3-.243-.544-.543-.544h-.004z" fill="currentColor" />
          </svg>
    Validation
  </div>
</div>
`,
        },
      },
    }}
  >
    >{searchInput.bind({})}
  </Story>
</Canvas>

## Rounded

Add the class `made-c-search-input--rounded` to the input element to make the input rounded.

<Canvas>
  <Story
    name="Rounded"
    argTypes={{
      placeholder: {
        name: "Placeholder",
      },
      state: {
        name: "State",
        control: {
          type: "radio",
          options: ["default", "disabled", "error"],
        },
      },
      validationText: {
        name: "Validation Text",
      },
      rounded : {
        name: "Rounded Corners"
      }
    }}
    args={{
      name: "rounded",
      value: "",
      placeholder: "Type to search...",
      state: "default",
      validationText: "Validation",
      rounded: true,
    }}
    parameters={{
      controls: {
        exclude: ["name", "value"],
      },
      docs: {
        source: {
          code: `
<div class="made-c-form__element">
  <div class="made-c-search-input__wrapper">
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
      class="made-c-search-input__search-icon"
    >
      <title>search</title>
      <path
        d="M9.083 0a9.083 9.083 0 016.936 14.948L24 22.93 22.93 24l-7.982-7.981A9.083 9.083 0 119.083 0zm.093 1.412a7.765 7.765 0 100 15.53 7.765 7.765 0 000-15.53z"
        fill="currentColor"
        fill-rule="evenodd"
      />
    </svg>
    <input
      type="text"
      id="default"
      name="default"
      class="made-c-search-input made-c-search-input--rounded made-u-margin-bottom-2-x"
      placeholder="Placeholder text"
    />
    <button type="button" class="made-c-search-input__close-button">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="26"
        height="25"
        viewBox="0 0 26 25"
        className="made-c-search-input__close-button-icon"
      >
        <title>close</title>
        <path
          d="M23.585.146l1.768 1.768-10.586 10.585 10.586 10.585-1.768 1.768L13 14.266 2.415 24.852.647 23.084 11.233 12.5.647 1.914 2.415.146 13 10.732 23.585.146z"
          fill="currentColor"
          fill-rule="evenodd"
        />
      </svg>
    </button>
  </div>
</div>
`,
        },
      },
    }}
  >
    >{searchInput.bind({})}
  </Story>
</Canvas>